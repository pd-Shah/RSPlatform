# by pedram shahsafi <pd.shahsafi@gmail.com>
image: docker
services:
  - docker:dind
stages:
  - build
  - test
  - deploy
before_script:
  - echo "before script running..."
build:
  stage: build
  script:
    - apk add --no-cache python3 py3-pip
    - python3 -V
    - pip3 install docker-compose
    - docker-compose build
    - docker-compose up
test:
  stage: test
  script:
    - echo "testing..."
    - python3 ./rsplatform/APIProvider/tests/auth_test.py
deploy:
  stage: deploy
  script:
     - echo "APIProvider deploy stage is running..."
     - echo "nothing to do right now..."
